(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{62:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(27),r=c.n(s),a=c(12),j=c(2),o=c(13),b=c(8),i=c(10),l=c(11),u=c.n(l),O=c(0),p={email:"",password:""},x=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),a=Object(i.a)(r,2),l=a[0],x=a[1],d=Object(j.g)();function h(e){var t=e.target,c=t.value,n=t.name;s((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(o.a)({},n,c))}))}return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"login"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{name:"email",value:c.email,onChange:h,placeholder:"email"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{name:"password",value:c.password,onChange:h,placeholder:"password",type:"password"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onClick:function(e){e.preventDefault(),u.a.post("http://localhost:5000/api/login",c).then((function(e){x(e.data.message),e.data.accessToken&&localStorage.setItem("jwt",JSON.stringify({token:e.data.accessToken})),setTimeout((function(){d.push("/")}),500)})).catch((function(e){e.response?x(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})),setTimeout((function(){x("")}),1e3),s(p)},type:"submit"})]}),Object(O.jsx)("p",{children:l})]})},d={name:"",email:"",password:""};var h=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),a=Object(i.a)(r,2),j=a[0],l=a[1];function p(e){var t=e.target,c=t.value,n=t.name;s((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(o.a)({},n,c))}))}return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"register"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{name:"name",value:c.name,onChange:p,placeholder:"name"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{name:"email",value:c.email,onChange:p,placeholder:"email"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{name:"password",value:c.password,onChange:p,placeholder:"password",type:"password"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{onClick:function(e){e.preventDefault(),u.a.post("https://simplemerndeploy.herokuapp.com/api/register",c).then((function(e){l(e.data.message)})).catch((function(e){e.response?l(e.response.data.message):e.request?console.log(e.request):console.log("Error",e.message)})),setTimeout((function(){l("")}),1e3),s(d)},type:"submit"})]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("p",{children:j})]})};var m=function(){var e=Object(j.g)();return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"After login page"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{onClick:function(){localStorage.removeItem("jwt"),e.push("/login")},type:"submit",children:"logout"})]})},g=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){u.a.get("https://simplemerndeploy.herokuapp.com/user/getaccinfo").then((function(e){s(e.data.user)})).catch((function(e){return console.error("There was an error!",e)}))}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:[" ","user names : "+c.map((function(e){return e.name}))]}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:[" ","user emails : "+c.map((function(e){return e.email}))]})]})},f=c(29),v=c(30),w=["component"],k=function(e){var t=e.component,c=Object(f.a)(e,w);return Object(O.jsx)(j.b,Object(b.a)(Object(b.a)({},c),{},{render:function(e){return function(){if(null!==localStorage.getItem("jwt")){var e=localStorage.getItem("jwt"),t=Object(v.a)(e),c=new Date;return 1e3*t.exp<c.getTime()?(localStorage.removeItem("jwt"),console.log("Token expired."),!1):(console.log("Valid token"),!0)}return!1}()?Object(O.jsx)(t,Object(b.a)({},e)):Object(O.jsx)(j.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var S=function(){return Object(O.jsx)("div",{children:Object(O.jsxs)(a.a,{children:[Object(O.jsx)("h1",{children:"Learn Auth"}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(a.b,{to:"/",children:"Your Account"}),Object(O.jsx)("br",{}),Object(O.jsx)(a.b,{to:"/login",children:"login"}),Object(O.jsx)("br",{}),Object(O.jsx)(a.b,{to:"/register",children:"register"}),Object(O.jsx)("br",{}),Object(O.jsx)(a.b,{to:"/getinfo",children:"see accounts"}),Object(O.jsxs)(j.d,{children:[Object(O.jsx)(k,{exact:!0,path:"/",component:m}),Object(O.jsx)(k,{exact:!0,path:"/getinfo",component:g}),Object(O.jsxs)(j.b,{exact:!0,path:"/login",children:[" ",Object(O.jsx)(x,{})," "]}),Object(O.jsxs)(j.b,{exact:!0,path:"/register",children:[" ",Object(O.jsx)(h,{})," "]})]})]})})};r.a.render(Object(O.jsx)(S,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.c9ca85f7.chunk.js.map