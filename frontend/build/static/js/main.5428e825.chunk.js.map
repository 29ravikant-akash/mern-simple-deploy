{"version":3,"sources":["pages/Login.jsx","pages/Register.jsx","pages/Accountinfo.jsx","pages/Getaccounts.jsx","pages/PrivateRoute.jsx","App.js","index.js"],"names":["initial","email","password","Login","useState","data","setdata","message","setmessage","history","useHistory","handlechange","e","target","value","name","prev","onChange","placeholder","type","onClick","preventDefault","axios","post","apiUrl","then","res","accessToken","localStorage","setItem","JSON","stringify","token","setTimeout","push","catch","error","response","request","console","log","Register","Accountinfo","removeItem","Getaccounts","useEffect","get","user","map","PrivateRoute","Component","component","rest","render","props","getItem","decodedToken","jwt_decode","currentDate","Date","exp","getTime","checkToken","to","pathname","state","from","location","App","exact","path","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5428e825.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useHistory } from \"react-router\";\r\nconst initial = {\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\nconst apiUrl =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://simplemerndeploy.herokuapp.com\"\r\n    : \"http://localhost:5000\";\r\n\r\nconst Login = () => {\r\n  const [data, setdata] = useState({});\r\n  const [message, setmessage] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  function handlechange(e) {\r\n    const { value, name } = e.target;\r\n    setdata((prev) => ({ ...prev, [name]: value }));\r\n  }\r\n  function handlesubmit(e) {\r\n    e.preventDefault();\r\n    axios\r\n      .post(apiUrl+\"/api/login\", data)\r\n      .then((res) => {\r\n        setmessage(res.data.message);\r\n        if (res.data.accessToken) {\r\n          localStorage.setItem(\r\n            \"jwt\",\r\n            JSON.stringify({ token: res.data.accessToken })\r\n          );\r\n        }\r\n        setTimeout(() => {\r\n          history.push(\"/\");\r\n        }, 500);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          // Request made and server responded\r\n          setmessage(\"login error 1 is... \"+error.response.data.message);\r\n          // console.log(error.response.data);\r\n          // console.log(error.response.status);\r\n          // console.log(error.response.headers);\r\n        } else if (error.request) {\r\n          // The request was made but no response was received\r\n          console.log(\"login error 2 is... \"+error.request);\r\n        } else {\r\n          // Something happened in setting up the request that triggered an Error\r\n          console.log(\"login error 3 is... \"+error.message);\r\n        }\r\n      });\r\n\r\n    setTimeout(() => {\r\n      setmessage(\"\");\r\n    }, 1000);\r\n    setdata(initial);\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>login</h1>\r\n      <br />\r\n      <br />\r\n      <form>\r\n        <input\r\n          name=\"email\"\r\n          value={data.email}\r\n          onChange={handlechange}\r\n          placeholder=\"email\"\r\n        />\r\n        <br />\r\n        <br />\r\n        <input\r\n          name=\"password\"\r\n          value={data.password}\r\n          onChange={handlechange}\r\n          placeholder=\"password\"\r\n          type=\"password\"\r\n        />\r\n        <br />\r\n        <br />\r\n        <input onClick={handlesubmit} type=\"submit\" />\r\n      </form>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nconst initial = {\r\n  name: \"\",\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\nconst apiUrl =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://simplemerndeploy.herokuapp.com\"\r\n    : \"http://localhost:5000\";\r\n    \r\nfunction Register() {\r\n  const [data, setdata] = useState({});\r\n  const [message, setmessage] = useState(\"\");\r\n  function handlechange(e) {\r\n    const { value, name } = e.target;\r\n    setdata((prev) => ({ ...prev, [name]: value }));\r\n  }\r\n  function handlesubmit(e) {\r\n    e.preventDefault();\r\n    axios\r\n      .post(apiUrl+\"/api/register\", data)\r\n      .then((res) => {\r\n        // console.log(res);\r\n        setmessage(res.data.message);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response) {\r\n          // Request made and server responded\r\n          setmessage(error.response.data.message);\r\n          // console.log(error.response.data);\r\n          // console.log(error.response.status);\r\n          // console.log(error.response.headers);\r\n        } else if (error.request) {\r\n          // The request was made but no response was received\r\n          console.log(\"registration error 1 is... \"+error.request);\r\n        } else {\r\n          // Something happened in setting up the request that triggered an Error\r\n          console.log(\"registration error 2 is... \"+error.message);\r\n        }\r\n      });\r\n    // .then(response => console.log(response.data))\r\n\r\n    setTimeout(() => {\r\n      setmessage(\"\");\r\n    }, 1000);\r\n    setdata(initial);\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>register</h1>\r\n      <br />\r\n      <br />\r\n      <form>\r\n        <input\r\n          name=\"name\"\r\n          value={data.name}\r\n          onChange={handlechange}\r\n          placeholder=\"name\"\r\n        />\r\n        <br />\r\n        <br />\r\n        <input\r\n          name=\"email\"\r\n          value={data.email}\r\n          onChange={handlechange}\r\n          placeholder=\"email\"\r\n        />\r\n        <br />\r\n        <br />\r\n        <input\r\n          name=\"password\"\r\n          value={data.password}\r\n          onChange={handlechange}\r\n          placeholder=\"password\"\r\n          type=\"password\"\r\n        />\r\n        <br />\r\n        <br />\r\n        <input onClick={handlesubmit} type=\"submit\" />\r\n      </form>\r\n      <br />\r\n      <br />\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React ,{useState}from 'react'\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router';\r\n\r\nfunction Accountinfo() {\r\n    const history = useHistory();\r\n    function dologout() {\r\n        localStorage.removeItem(\"jwt\");\r\n        history.push(\"/login\");\r\n    }\r\n    return (\r\n        <div>\r\n            <h1>After login page</h1>\r\n            <br />\r\n            <br />\r\n            <button onClick={dologout} type=\"submit\" >logout</button>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Accountinfo\r\n","import React, { useState ,useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nconst apiUrl =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://simplemerndeploy.herokuapp.com\"\r\n    : \"http://localhost:5000\";\r\n\r\nconst Getaccounts = () => {\r\n  const [data, setdata] = useState([]);\r\n  useEffect(() => {\r\n    axios\r\n    .get(apiUrl+\"/user/getaccinfo\")\r\n    .then((res) => {\r\n      // console.log(res.data.user);\r\n      setdata(res.data.user);\r\n    })\r\n    .catch((error) => console.error(\"There was an error!\", error));\r\n  }, [])\r\n  \r\n  return (\r\n    <div>\r\n      <br />\r\n      <br />\r\n      <span> {\"user names : \" + data.map((user) => user.name)}</span>\r\n      <br />\r\n      <span> {\"user emails : \" + data.map((user) => user.email)}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Getaccounts;\r\n","import React, { useState } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nexport const PrivateRoute = ({ component: Component, ...rest }) => {\r\n\r\n    function checkToken() {\r\n        if (localStorage.getItem(\"jwt\") !== null) {\r\n            let token = localStorage.getItem(\"jwt\");\r\n            let decodedToken = jwt_decode(token);\r\n            let currentDate = new Date();\r\n\r\n            // JWT exp is in seconds\r\n            if (decodedToken.exp * 1000 < currentDate.getTime()) {\r\n                localStorage.removeItem(\"jwt\")\r\n                console.log(\"Token expired.\");\r\n                return false;\r\n            } else {\r\n                console.log(\"Valid token\");\r\n                return true;\r\n            }\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Route {...rest}\r\n            render={\r\n                props => {\r\n                    return (\r\n                        checkToken() ?\r\n                            <Component {...props} /> :\r\n                            <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n                    )\r\n                }\r\n            }\r\n        />\r\n    )\r\n}\r\n            // localStorage.getItem(\"jwt\") ?","import React from 'react'\r\nimport {BrowserRouter, Link, Route, Switch } from 'react-router-dom'\r\nimport Login from './pages/Login'\r\nimport Register from './pages/Register'\r\nimport Accountinfo from \"./pages/Accountinfo\"\r\nimport Getaccounts from './pages/Getaccounts'\r\nimport { PrivateRoute } from './pages/PrivateRoute'\r\n\r\nfunction App() {\r\n  return (\r\n    <div>\r\n      <BrowserRouter>\r\n        <h1>\r\n          Learn Auth\r\n        </h1>\r\n        <br />\r\n        <br />\r\n        <Link to=\"/\" >Your Account</Link>\r\n        <br />\r\n        <Link to=\"/login\" >login</Link>\r\n        <br />\r\n        <Link to=\"/register\" >register</Link>\r\n        <br />\r\n        <Link to=\"/getinfo\" >see accounts</Link>\r\n        <Switch>\r\n          <PrivateRoute exact path=\"/\" component={Accountinfo} />\r\n          <PrivateRoute exact path=\"/getinfo\" component={Getaccounts}/>\r\n          <Route exact path=\"/login\"> <Login /> </Route>\r\n          <Route exact path=\"/register\"> <Register /> </Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default App\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}